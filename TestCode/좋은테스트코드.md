# 좋은 테스트를 위해서 
'실전 자바 소프트웨어 개발' 책에 있는 테스트에 대한 부분을 정리했다.

사실 아래의 내용들을 알고 있더라도 테스트를 실제로 작성하는 것이 제일 중요하다. 작성한다는 가정하에 아래 내용들을 참고하자. 

## 테스트 이름
가독성, 유지보수성, 실행할 수 있는 문서의 역할을 고려한다. 이름만으로 어떤 기능이 동작하고 어떤 기능이 동작하지 않았는지 알 수 있어야 한다. 

모범 규칙 3가지
- 도메인 용어 사용
- 자연어 사용: 모든 테스트의 이름은 일반 문장처럼 쉽게 읽을 수 있어야한다. 테스트 이름은 항상 어떤 동작을 쉽게 이해할 수 있도록 묘사해야한다. 
- 서술적: 코드는 한번 구현하면 여러 번 읽게 된다. 나중에 쉽게 읽을 수 있도록 애초에 시간을 들여 서술적인 좋은 이름을 붙이자. 

## 구현이 아닌 동작
공개 동작 (public behavior)만 테스트한다. 

세부 구현에 의존한 테스트는 구현이 바뀌면 결과가 실패로 바뀌게 된다.

## 중복 배제
안타깝게도 많은 개발자들이 응용프로그램 코드에는 중복 코드를 사용하지 않으려고 애쓰지만, 테스트 코드의 중복 코드는 크게 신경쓰지 않는다. 

테스트 코드에도 공용 코드가 있다면 별도로 분리하자. 

## 좋은 진단
테스트가 실패했을 때 실패한 이유를 잘 설명해서 쉽게 이해할 수 있도록 해야한다. 

junit에서는 아래 3가지를 이용해서 값을 비교할 수 있는데 각각의 특정을 보자. 
```java
private Document onlyDocument() {
   final List<Document> documents = system.contents();
   assertThat(documents, hasSize(1));  // <-- 여기를 테스트한다고 할 때
   return documents.get(0);
}
```

1. assertTrue: assertTrue(documents.size() == 0)
   - 테스트 검증은 되지만 단순히 AssertionError만 확인 가능하기 때문에 원인 파악이 어렵다
2. assertEquals: assertEquals(0, documents.size());
   - 기대 값과 실제 값을 알 수 있지만 여기까지다
3. assertThat: assertThat(documents, hasSize(0));
   - assertThat의 두번째 인수는 Matcher를 받는다. Matcher는 값이 어떤 속성과 일치하는지와 관련된 진단을 캡슐화 한다. 
   - 이를 이용하면 기대한 속성의 값이 어떻게 다른지를 세부적으로 설명해준다

## 오류 상황 테스트
테스트코드는 응용프로그램이 아름답게 실행되는 경우만 테스트해서는 안된다. 

다양한 문제를 시도하고 오류 상황을 확인하는 테스트코드가 꼭 필요하다. 