# Environment

## 프로파일
정의
- 빈들의 묶음
- 각각의 환경애 따라 서로 다른 빈을 써야하는 경우

사용
- Spring ApplicationContext의 Environment를 통해서 사용할 수 있다

프로파일 확인 샘플 코드
- ApplicationContext에서 현재 프로파일 정보를 가져오는 법
    ~~~java
    @Autowired
    ApplicationContext context;

    @Override
    public void run(ApplicationArguments args) throws Exception {
        Environment environment = context.getEnvironment();
        System.out.println(Arrays.toString(environment.getActiveProfiles()));
        System.out.println(Arrays.toString(environment.getDefaultProfiles()));
    }
    ~~~

프로파일 설정 샘플 코드
- 샘플 코드
    ~~~java
    @Configuration
    @Profile("test")
    public class TestConfiguration {

        @Bean
        public BookRepository bookRepository() {
            return new TestBookRepository();
        }
    }
    ~~~

프로파일 선언 방법
- IDE에서 설정: Run/Debug Configuration
   - VM Options: -Dspring.profiles.active="test"
- 클래스에 선언
   - @Configuration @Profile("test")
   - @Component @Profile("test")

프로파일 표현식
- !(not)
- & (and)
- | (or)



## 프로퍼티
정의
- 키/밸류 형식으로 정의된 값을 관리하는 기능

선언
1. IDE에서 선언
   - `Run/Debug Configuration` -> `VM options` 에서 설정
   - 예: -Dapp.name=spring5
2. Properties 파일에서 선언
   - app.about=spring 로 선언
   - 프로그램 실행 코드에서 PropertySource 선언 필요
      - @PropertySource("classpath:/app.properties")

사용
- Environment가 제공하는 `getProperty` 함수를 사용
    ~~~java
    Environment environment = context.getEnvironment()
    System.out.println(environment.getProperty("app.name"));
    ~~~
- 변수로 가져와서 사용
   ~~~java
   @Value("${app.name}")
   String appName;
   ~~~