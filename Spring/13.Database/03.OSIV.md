### 개념
영속성 컨텍스트를 Controller 영역까지 확장해서 사용할 수 있도록 한다. 

일반적으로는 영속성 컨텍스트는 Transaction이 사직되고 종료되는 과정에서 존재하지만, OSIV가 활성화 되어 있으면 Transaction이 시작되는 시점부터 Controller 응답이 처리되는 순간까지 남아있게 된다. 

### 장점
- 트랜잭션이 짧게 유지된다
- 컨트롤러에서 영속성 컨텍스트를 사용할 수 있다

### 단점
- Connection Pool을 가지고 있는 시간이 길어지기 때문에 장애가 발생했거나, 요청에 대한 응답이 느려질 겅으 Connection Pool이 모자라서 서비스가 동작하지 않을 수 있다

### 대응 방법
1. Query용 별도의 서비스를 만든다
   - 생성된 서비스는 readonly를 true로 가지는 서비스 클래스
   - 컨트롤러에서는 이 서비스를 호출만 하도록 한다
   - 서비스가 컨트롤러가 필요로하는 정보를 리턴한다
   - 예: OrderService
      - OrderService: 핵심 비지니스 로직
      - OrderQueryService: 화면이나 API에 맞춘 서비스 (읽기 트랜잭션 전용)
2. Command와 Query를 분리하는 방법

### 그래서?
고객서비스같이 요청이 많은 API 서버는 OSIV를 끄고, Admin처럼 커넥션을 많이 사용하지 않는 곳에서는 켠다